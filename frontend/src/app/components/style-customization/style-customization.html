<app-navbar></app-navbar>

<!-- FLOTANTE DERECHA -->
<div class="floating-info" aria-label="Estado del documento">
  <div class="error-circle" [style.--percent]="errorPercent + '%'" role="progressbar"
       [attr.aria-valuenow]="errorPercent" aria-valuemin="0" aria-valuemax="100">
    <span>{{ errorPercent }}% Error</span>
  </div>

  <!-- Descarga del reporte -->
  <button class="download-btn" type="button" (click)="descargarReporte()" [disabled]="!resultadoCorreccion">
    Descargar reporte
  </button>
</div>

<!-- Acciones principales -->
<div class="actions">
  <button type="button" (click)="corregirDocumento()" [disabled]="loading">
    {{ loading ? 'Procesando…' : 'Corregir documento' }}
  </button>
</div>

<!-- Resultados -->
<section *ngIf="resultadoCorreccion" class="results">
  <h3>Correcciones</h3>
  <pre>{{ resultadoCorreccion | json }}</pre>
</section>

<!-- Visor del documento -->
<div class="viewer-container">
  <div class="header">
    <h1>Visualiza tu documento</h1>
    <p>Revisa el contenido extraído del archivo.</p>
  </div>

  <div class="document-box" *ngIf="documentContent; else emptyState">
    <pre [innerHTML]="documentContentHTML"></pre>
  </div>

  <ng-template #emptyState>
    <p class="muted">Aún no hay contenido cargado.</p>
  </ng-template>

  <button (click)="descargarDocumentoCorregido()">
  Descargar documento corregido
</button>

</div>